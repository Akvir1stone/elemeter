<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Bare - Start Bootstrap Template</title>
        <!-- Favicon-->
<!--        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />-->
        <!-- Core theme CSS (includes Bootstrap)-->
        <link rel="stylesheet" href="static/css/styles.css" />

</head>
<body>


    <canvas class="my-4 w-100" id="myChart" width="900" height="380"></canvas>

    <div>
        <form action="/{{ date }}">
            <label for="date">Фильтр по дате:</label>
            <input type="date" id="date" name="date">
            <input type="submit">
        </form>
    </div>

    <div  class="table-responsive small">
                <script>
                    const dates = [];
                    const volts = [];
                    var st = new String();
                </script>
        <table class="table table-striped table-sm">
            <thead>
            <TR>
                <TD scope="col"><b>power1</b></TD>
                <TD scope="col"><b>power2</b></TD>
                <TD scope="col"><b>power3</b></TD>
                <TD scope="col"><b>voltage1</b></TD>
                <TD scope="col"><b>voltage2</b></TD>
                <TD scope="col"><b>voltage3</b></TD>
                <TD scope="col"><b>current1</b></TD>
                <TD scope="col"><b>current2</b></TD>
                <TD scope="col"><b>current3</b></TD>
                <TD scope="col"><b>date</b></TD>
            </TR>
            </thead>
            <tbody>
            {% for r in resp %}
            <TR>
                <TD>{{r.power1}}</TD>
                <TD>{{r.power2}}</TD>
                <TD>{{r.power3}}</TD>
                <TD>{{ r.voltage1 }}</TD>
                <TD>{{r.voltage2}}</TD>
                <TD>{{r.voltage3}}</TD>
                <TD>{{r.current1}}</TD>
                <TD>{{r.current2}}</TD>
                <TD>{{r.current3}}</TD>
                <TD>{{ r.date|safe }}</TD>
                <script>
                    st = {{ r.date|safe }}
                    dates.push(1);
                    volts.push({{ r.voltage1 }});
                </script>
            </TR>
            {% endfor %}
            <tbody/>
        </table>
    </div>
                <script>

                    console.log(dates);
                    console.log(volts);
                </script>


<!--    ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]-->
<!--    [15339, 21345, 18483, 24003, 23489, 24092, 12034]-->

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
<script>
      var ctx = document.getElementById("myChart");
      var myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: dates,
          datasets: [{
            data: volts,
            lineTension: 0,
            backgroundColor: 'transparent',
            borderColor: '#007bff',
            borderWidth: 4,
            pointBackgroundColor: '#007bff'
          }]
        },
        options: {
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: false
              }
            }]
          },
          legend: {
            display: false,
          }
        }
      });
    </script>

</body>
</html>